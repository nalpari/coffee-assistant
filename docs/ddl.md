# 테이블 목록

## 실제 데이터 구조 요약
- **Category IDs**: 1=COFFEE, 2=NON-COFFEE, 3=SIGNATURE, 4=SMOOTHIE & FRAPPE, 5=ADE & TEA, 6=COLD BREW
- **Menu Status Codes**: E0101=사용, E0102=미사용
- **Marketing Codes**: E0201=New, E0202=Best, E0203=Event
- **Category Status Codes**: D0101=사용, D0102=미사용

## 메뉴 아이템 테이블
- marketing, status 컬럼은 common_code 테이블의 id 와 연관 (예: status='E0101', marketing=['E0201', 'E0202'])
- category_id 컬럼은 category 테이블의 id 와 연관 (예: 1=COFFEE)
```
CREATE TABLE public.menu (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	created_by varchar(255) NOT NULL,
	created_date timestamp(6) NOT NULL,
	updated_by varchar(255) NULL,
	updated_date timestamp(6) NULL,
	cold bool NOT NULL,
	description varchar(500) NOT NULL,
	discount_price int4 NULL,
	hot bool NOT NULL,
	marketing _text NULL,
	name varchar(255) NOT NULL,
	order_no int4 NOT NULL,
	price int4 NOT NULL,
	status varchar(255) NOT NULL,
	category_id int8 NULL,
	CONSTRAINT menu_pkey PRIMARY KEY (id),
	CONSTRAINT fkww84tou7nixng06lmxawvcre FOREIGN KEY (category_id) REFERENCES public.category(id)
);
```

## 카테고리 테이블
```
CREATE TABLE public.category (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	created_by varchar(255) NOT NULL,
	created_date timestamp(6) NOT NULL,
	updated_by varchar(255) NULL,
	updated_date timestamp(6) NULL,
	"name" varchar(255) NOT NULL,
	order_no int4 NOT NULL,
	status varchar(255) NOT NULL,
	CONSTRAINT category_pkey PRIMARY KEY (id)
);
CREATE INDEX idx_category_order_no ON public.category USING btree (order_no);
```

## 아이템 이미지 테이블
- menu_id 컬럼은 menu 테이블의 id 와 연관 (외래키 제약조건 있음)
- 메뉴 삭제 시 관련 이미지도 자동 삭제 (ON DELETE CASCADE)
```
CREATE TABLE public.image (
	file_uuid varchar(255) NOT NULL,
	created_by varchar(255) NOT NULL,
	created_date timestamp(6) NULL,
	file_name varchar(255) NOT NULL,
	menu_id int8 NOT NULL,
	menu_type varchar(255) NOT NULL,
	"ordering" int4 NOT NULL,
	CONSTRAINT image_pkey PRIMARY KEY (file_uuid),
	CONSTRAINT fk_image_menu_id FOREIGN KEY (menu_id) REFERENCES public.menu(id) ON DELETE CASCADE
);
CREATE INDEX idx_image_menu_id ON public.image USING btree (menu_id);
CREATE INDEX idx_image_menu_ordering ON public.image USING btree (menu_id, ordering);
```

## 공통코드
```
CREATE TABLE public.common_code (
	id varchar(50) NOT NULL,
	created_by varchar(255) NOT NULL,
	created_date timestamp(6) DEFAULT now() NOT NULL,
	updated_by varchar(255) NULL,
	updated_date timestamp(6) NULL,
	del_yn varchar(1) DEFAULT 'N'::character varying NOT NULL,
	description text NULL,
	extra_value text NULL,
	"name" varchar(100) NOT NULL,
	parent_id varchar(50) NULL,
	sort_order int4 DEFAULT 0 NOT NULL,
	value varchar(100) NOT NULL,
	CONSTRAINT common_code_pkey PRIMARY KEY (id),
	CONSTRAINT idx_common_code_value_unique UNIQUE (value),
	CONSTRAINT fkrn6cve5ahtpxtnslisd8y38ky FOREIGN KEY (parent_id) REFERENCES public.common_code(id)
);
CREATE INDEX idx_common_code_covering_recursive ON public.common_code USING btree (parent_id, del_yn, sort_order, id, value, name);
CREATE INDEX idx_common_code_del_yn ON public.common_code USING btree (del_yn);
CREATE INDEX idx_common_code_hierarchy_btree ON public.common_code USING btree (parent_id, id, del_yn);
CREATE INDEX idx_common_code_id_active ON public.common_code USING btree (id, del_yn);
CREATE INDEX idx_common_code_parent_active ON public.common_code USING btree (parent_id, del_yn, sort_order);
```